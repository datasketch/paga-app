library(tidyverse)
dic_all <- read_csv("data/dic-Grid view.csv")[,-4]
# Entidades ---------------------------------------------------------------
entidades <- read_csv("data/formulario-entidades-Grid view.csv")
entidades <- entidades %>% drop_na(`Entidad responsable de registrar el avance`)
entidades <- Filter(function(x) !all(is.na(x)), entidades)
dic_entidades <- data_frame(label_original = names(entidades))
dic_entidades <- dic_entidades %>% left_join(dic_all)
names(entidades) <- dic_entidades %>% .$id
entidades$avance <- as.numeric(gsub("%", "", entidades$avance))
# Contrapartes ------------------------------------------------------------
contrapartes <- read_csv("data/formulario-contrapartes-Grid view.csv")
contrapartes <- contrapartes %>% drop_na(`Nombre del compromiso`)
contrapartes <- Filter(function(x) !all(is.na(x)), contrapartes)
dic_contra <- data_frame(label_original = names(contrapartes))
dic_contra <- dic_contra %>% left_join(dic_all)
names(contrapartes) <- dic_contra %>% .$id
data_all <- contrapartes %>% full_join(entidades)
# Compromisos -------------------------------------------------------------
compromisos <- read_csv("data/información-general-compromisos-Grid view.csv")[-1]
compromisos <- Filter(function(x) !all(is.na(x)), compromisos)
dic_com <- data_frame(label_original = names(compromisos))
dic_com <- dic_com %>% left_join(dic_all)
names(compromisos) <- dic_com %>% .$id
data_all <- compromisos %>% full_join(data_all)
write_rds(data_all, "all_data.rds")
write_rds(dic_all, "all_dic.rds")
library(tidyverse)
dic_all <- read_csv("data/dic-Grid view.csv")[,-4]
# Entidades ---------------------------------------------------------------
entidades <- read_csv("data/formulario-entidades-Grid view.csv")
entidades <- entidades %>% drop_na(`Entidad responsable de registrar el avance`)
entidades <- Filter(function(x) !all(is.na(x)), entidades)
dic_entidades <- data_frame(label_original = names(entidades))
dic_entidades <- dic_entidades %>% left_join(dic_all)
names(entidades) <- dic_entidades %>% .$id
entidades$avance <- as.numeric(gsub("%", "", entidades$avance))
# Contrapartes ------------------------------------------------------------
contrapartes <- read_csv("data/formulario-contrapartes-Grid view.csv")
contrapartes <- contrapartes %>% drop_na(`Nombre del compromiso`)
contrapartes <- Filter(function(x) !all(is.na(x)), contrapartes)
dic_contra <- data_frame(label_original = names(contrapartes))
dic_contra <- dic_contra %>% left_join(dic_all)
names(contrapartes) <- dic_contra %>% .$id
data_all <- contrapartes %>% full_join(entidades)
# Compromisos -------------------------------------------------------------
compromisos <- read_csv("data/información-general-compromisos-Grid view.csv")[-1]
compromisos <- Filter(function(x) !all(is.na(x)), compromisos)
dic_com <- data_frame(label_original = names(compromisos))
dic_com <- dic_com %>% left_join(dic_all)
names(compromisos) <- dic_com %>% .$id
data_all <- compromisos %>% full_join(data_all)
data_all <- data_all %>% filter(contraparte %in% "Co-diseño de la hoja de ruta para la implementación del Estándar EITI para mejorar la transparencia en las industrias extractivas en Ecuador (petróleo, gas y minería)")
library(tidyverse)
dic_all <- read_csv("data/dic-Grid view.csv")[,-4]
# Entidades ---------------------------------------------------------------
entidades <- read_csv("data/formulario-entidades-Grid view.csv")
entidades <- entidades %>% drop_na(`Entidad responsable de registrar el avance`)
entidades <- Filter(function(x) !all(is.na(x)), entidades)
dic_entidades <- data_frame(label_original = names(entidades))
dic_entidades <- dic_entidades %>% left_join(dic_all)
names(entidades) <- dic_entidades %>% .$id
entidades$avance <- as.numeric(gsub("%", "", entidades$avance))
# Contrapartes ------------------------------------------------------------
contrapartes <- read_csv("data/formulario-contrapartes-Grid view.csv")
contrapartes <- contrapartes %>% drop_na(`Nombre del compromiso`)
contrapartes <- Filter(function(x) !all(is.na(x)), contrapartes)
dic_contra <- data_frame(label_original = names(contrapartes))
dic_contra <- dic_contra %>% left_join(dic_all)
names(contrapartes) <- dic_contra %>% .$id
data_all <- contrapartes %>% full_join(entidades)
# Compromisos -------------------------------------------------------------
compromisos <- read_csv("data/información-general-compromisos-Grid view.csv")[-1]
compromisos <- Filter(function(x) !all(is.na(x)), compromisos)
dic_com <- data_frame(label_original = names(compromisos))
dic_com <- dic_com %>% left_join(dic_all)
names(compromisos) <- dic_com %>% .$id
data_all <- compromisos %>% full_join(data_all)
View(data_all)
data_all <- data_all %>% filter(contraparte != "Co-diseño de la hoja de ruta para la implementación del Estándar EITI para mejorar la transparencia en las industrias extractivas en Ecuador (petróleo, gas y minería)")
write_rds(data_all, "all_data.rds")
